## Setup Instructions
1. Clone this repository and navigate to the directory
```
git clone https://github.com/pkrobinette/malware_nnenum
cd malware_nnenum
```

2. Download nnenum tool from github:
```
git clone https://github.com/stanleybak/nnenum
```

3. Change directories
```
cd nnenum
```

4. Create a conda environment
```
conda create -n malware python=3.10 pip -y && conda activate malware
```

5. Install dependencies
```
pip install -r requirements.txt
```

6. Add to path and env vars.
```
export PYTHONPATH=$PYTHONPATH:$(pwd)/src
export OPENBLAS_NUM_THREADS=1
export OMP_NUM_THREADS=1
```

7. Update a file to run for a linear network

7.a. navigate to `src/nnenum/onnx_network.py` and locate the following line (769):
  ```
  assert relus, "expected at least one relu layer in network"
  ```
  7.b. comment this out:
  ```
  # assert relus, "expected at least one relu layer in network"
  ```

8. Test install
```
chmod +x run_tests.sh && ./run_tests.sh
```

9. Return to experiments folder
```
cd .. 
```

** you should now be in the `malware_nnenum` folder **

## How to Run
1. Run the experiments:
```
chmod +x run_all.sh && ./run_all.sh
```
